#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <windows.h>
#include <time.h>
#define DER 77
#define IZQ 75
#define ARR 72
#define ABJ 80
/* run this program using the console pauser or add your own getch, system("pause") or input loop */
struct bala{
	int x,y;
};
void imprimir(int mapa[25][25]);
int main(int argc, char *argv[]) {
	int mapa[25][25]={{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	                  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
					  {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
					  
					  };
					  char te=0;
					  int fi,co,dir,f,c,x,y,disparo;
					  int cont=0;
					  imprimir(mapa);
					  fi=23; co=1;
					   f=fi-1;  c=co;
					  mapa[fi][co]=2;
					  while(te!='s'){
					  	te=0;
					  	if(kbhit()){
					  		te=getch();
					  		
						  }
					  		
						  
						  
						  mapa[fi][co]=0;
						  mapa[f][c]=0;
						  if(te==DER){
						  	if(mapa[fi][co+1]!=1){
						  		 co++;
							  }
						  }
						  if(te==IZQ){
						  	if(mapa[fi][co-1]!=1){
						  		co--;
							  }
						  }
						  if(te=='d'){
						  	    f=fi-1;
						  	    c=co;
						  	  
						  	   disparo=1;
						  		
						  		
							  
						  }
						  
						  if(disparo==1){
						  	   
						  	    mapa[f+1][c]=0;
						    	mapa[f][c]=3;
						    	if(mapa[f-1][c]!=1){
						    		f--;
								}
								if(mapa[f-1][c]==1){
						    		mapa[f][c]=0;
						    	
								}
								
									 
						  }
						  
						  
						  
						  
						   cont++;
						   mapa[fi][co]=2;
						   
						  imprimir(mapa);
						  Sleep(20);
					  }
					  
					  
					  
	return 0;
}

void imprimir(int mapa[25][25]){
	int x,y;
	system("cls");
	for(x=0;x<25;x++){
		printf("\n");
		  for(y=0;y<25;y++){
		  	if(mapa[x][y]==0){
		  		printf(" ");
			  }
			if(mapa[x][y]==1){
				printf("*");
			}  
			if(mapa[x][y]==2){
				printf("\1");
			}
			if(mapa[x][y]==3){
				printf("|");
			}
	     }
   }
}
